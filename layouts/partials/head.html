<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  // Immediate check to prevent flashing
  if (localStorage.getItem('theme') === 'dark') {
    document.documentElement.classList.add('dark-mode');
  }
</script>

{{ hugo.Generator }}

{{ if eq .RelPermalink "/" }}
<title>{{ .Site.Title }}</title>
<meta property="og:title" content="{{ .Site.Title }}">
<meta property="og:type" content="website">
{{ else }}
<title>{{ .Title }}{{ with .Params.subtitle }} - {{ . }} {{ end }} - {{ .Site.Title }}</title>
<meta property="og:title" content="{{ .Title }} - {{ .Site.Title }}">
<meta property="og:type" content="article">
{{ end }}

{{ with .Site.Params.favicon }}
  <link href='{{ . | absURL }}' rel='icon' type='image/x-icon'/>
{{ end }}

{{ if eq .RelPermalink "/" }}
<meta property="description" content="{{ .Site.Params.description }}">
{{ else }}
  {{ if .Description }}
  <meta property="description" content="{{ .Description }}">
  {{ end }}
{{ end }}

{{ if .Keywords }}
<meta property="keywords" content ="{{ delimit .Keywords ", " }}">
{{ end }}

{{ with .OutputFormats.Get "RSS" }}
<link href="{{ .RelPermalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" />
{{ end }}

{{ partial "head_highlightjs" . }}

<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="{{ "css/fonts.css" | relURL }}" media="all">
<link rel="stylesheet" href="{{ "css/main.css" | relURL }}" media="all">

{{ partial "head_custom" . }}

{{/* Load CSS based on environment:
     - Development: test.css (local testing)
     - Production: custom.css (live site) */}}
{{ if eq hugo.Environment "development" }}
  <link rel="stylesheet" href="{{ "css/test.css" | relURL }}">
{{ else }}
  <link rel="stylesheet" href="{{ "css/custom.css" | relURL }}">
{{ end }}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">