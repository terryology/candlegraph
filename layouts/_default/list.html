{{ partial "header.html" . }}

<main class="content" role="main">

  {{ if .Content }}
  <article class="article intro">
    {{ if .Title }}
    <h1 class="article-title">{{ .Title }}</h1>
    {{ end }}
    <div class="article-content">
      {{ .Content }}
    </div>
  </article>
  {{ end }}

  <div class="archive">
    {{ $pages := .Pages }}
    {{ if .IsHome }}
      {{ $pages = .Site.RegularPages }}
    {{ end }}

    {{ $paginator := .Paginate (where $pages "Section" "!=" "") }}

    {{ range $paginator.Pages }}
      {{ partial "post_preview.html" . }}
    {{ end }}

    {{ if gt $paginator.TotalPages 1 }}
    <nav class="pagination" aria-label="Page navigation">

      {{/* Previous button */}}
      {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="pagination-btn pagination-prev" aria-label="Previous page">
          &laquo; Previous
        </a>
      {{ else }}
        <span class="pagination-btn pagination-prev pagination-disabled">&laquo; Previous</span>
      {{ end }}

      {{/* Numbered pages */}}
      <div class="pagination-numbers">
        {{ range $paginator.Pagers }}
          {{ if eq . $paginator }}
            <span class="pagination-number pagination-current" aria-current="page">{{ .PageNumber }}</span>
          {{ else }}
            <a href="{{ .URL }}" class="pagination-number">{{ .PageNumber }}</a>
          {{ end }}
        {{ end }}
      </div>

      {{/* Next button */}}
      {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="pagination-btn pagination-next" aria-label="Next page">
          Next &raquo;
        </a>
      {{ else }}
        <span class="pagination-btn pagination-next pagination-disabled">Next &raquo;</span>
      {{ end }}

    </nav>
    {{ end }}

  </div>

</main>

{{ partial "footer.html" . }}
